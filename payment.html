<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>WAKA OFF KAZAKH — Оплата</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<link rel="icon" type="image/png" sizes="32x32" href="/img/logo.png">
<link rel="icon" type="image/png" sizes="16x16" href="/img/logo.png">
<link rel="apple-touch-icon" href="/img/logo.png">

<style>
:root {
  --bg: #0f0f12;
  --card: #16161b;
  --text: #f5f5f7;
  --muted: #9ca3af;
  --accent: #ffffff;
  --border: #26262c;
  --success: #22c55e;
}

* { box-sizing: border-box; font-family: "Inter", system-ui, sans-serif; }

body {
  margin: 0;
  min-height: 100vh;
  background: var(--bg);
  color: var(--text);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 24px;
}

.container { width: 100%; max-width: 520px; }

.card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 20px;
  padding: 32px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.4);
}

.logo { text-align: center; margin-bottom: 28px; }
.logo h1 { margin: 0; font-size: 26px; font-weight: 700; letter-spacing: 0.1em; }
.logo span { display: block; margin-top: 6px; font-size: 12px; color: var(--muted); letter-spacing: 0.15em; text-transform: uppercase; }

.section { margin-bottom: 24px; }
.section-title { font-size: 14px; font-weight: 600; margin-bottom: 10px; }

.steps { display: flex; flex-direction: column; gap: 12px; font-size: 13px; line-height: 1.5; }
.step { display: flex; gap: 10px; }
.step-num {
  min-width: 22px; height: 22px;
  border-radius: 50%; background: var(--accent); color: #000;
  display: flex; align-items: center; justify-content: center;
  font-size: 12px; font-weight: 600;
}

.actions { margin-top: 28px; }
.pay-btn {
  width: 100%; padding: 14px;
  background: var(--accent); color: #000; border: none; border-radius: 12px;
  font-size: 15px; font-weight: 600; cursor: pointer;
  transition: opacity 0.2s, transform 0.05s;
}
.pay-btn:hover { opacity: 0.9; }
.pay-btn:active { transform: scale(0.98); }
.pay-btn.success { background: var(--success); color: #052e14; }

.status {
  margin-top: 14px;
  text-align: center;
  font-size: 12px;
  color: var(--muted);
  display: none;
}
.status.show { display: block; }

.footer { margin-top: 16px; text-align: center; font-size: 11px; color: var(--muted); }

@media (max-width: 480px) { .card { padding: 24px 20px; } .logo h1 { font-size: 22px; } }
</style>
</head>
<body>

    <div class="container">
        <div class="card">
            <div class="logo">
                <h1>WAKA OFF</h1>
                <span>KAZAKH</span>
            </div>

            <!-- Инструкция -->
            <div class="section">
                <div class="section-title">Как оплатить?</div>
                <div class="steps">
                    <div class="step"><div class="step-num">1</div><div>Нажмите кнопку «Оплатить»</div></div>
                    <div class="step"><div class="step-num">2</div><div>Вы перейдёте на страницу оплаты</div></div>
                    <div class="step"><div class="step-num">3</div><div>Подтвердите платёж</div></div>
                    <div class="step"><div class="step-num">4</div><div>После оплаты вернитесь на эту страницу и нажмите «Я оплатил»</div></div>
                </div>
            </div>

            <!-- Кнопки -->
            <div class="actions">
                <button id="qiwiBtn" class="pay-btn">Оплатить</button>
                <button id="paidBtn" class="pay-btn" style="margin-top:12px;">Я оплатил(а)</button>
            </div>

            <div id="status" class="status">
            Платёж отправлен. Мы проверим перевод и свяжемся с вами.
            </div>

            <div class="footer">
            После оплаты обязательно нажмите кнопку подтверждения
            </div>
        </div>
    </div>

<script>
const qiwiBtn = document.getElementById("qiwiBtn");
const paidBtn = document.getElementById("paidBtn");
const statusEl = document.getElementById("status");

/* ===============================
   CHECK ORDER
=============================== */
const orderId = localStorage.getItem("current_order");
if (!orderId) { alert("Заказ не найден"); window.location.href = "index.html"; }

const orders = JSON.parse(localStorage.getItem("waka_orders") || "[]");
const order = orders.find(o => o.id === orderId);
if (!order) { alert("Заказ не найден"); window.location.href = "index.html"; }

/* ===============================
   OPEN QIWI
=============================== */
qiwiBtn.addEventListener("click", () => {
  // Перенаправляем на твою ссылку QIWI
  const link = "https://qplus.ru/replenish/invoice/074496a8-2dc7-4a77-8880-21f1d240c42b";
  window.open(link, "_blank");
});

/* ===============================
   PAYMENT CONFIRM
=============================== */
paidBtn.addEventListener("click", () => {
  // Обновляем заказ
  order.status = "paid";
  order.paidAt = new Date().toISOString();
  const updatedOrders = orders.map(o => o.id === order.id ? order : o);
  localStorage.setItem("waka_orders", JSON.stringify(updatedOrders));

  // UI
  paidBtn.classList.add("success");
  paidBtn.innerText = "Ожидает проверки";
  paidBtn.disabled = true;
  statusEl.classList.add("show");

  // Можно через некоторое время редирект на success
  setTimeout(() => {
    window.location.href = "success.html";
  }, 1*60*1000); // 2 минуты
});
</script>

</body>
</html>
